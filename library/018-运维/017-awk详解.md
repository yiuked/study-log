## awk详解
#### awk是用来做什么的？
AWK是一种处理文本文件的语言，是一个强大的文本分析工具,常用于格式化输出文件或者报告
#### awk常见用法？
* 用法一:
```shell
awk '{[pattern] action}' {filenames}   # 行匹配语句 awk '' 只能用单引号
```
以上命令会默认以TAB符对行进行分割处理，分割后，通过$1、$2、$3 ...对每一行的子项进行匹配，$0为整行。
以下为几个实用的例子：
```shell
# 提取nginx中用户的IP地址
awk '{print $1}' access.log
# awk的输入文件可以通过管道符"|"实现,
tail -n 20 access.log|awk '{print $1}'
# 这样就可以只提取access.log文件中最后20条的IP地址了
```
* 用法二  
用法一中的方法只能针对TAB分隔符的文件进行处理，实际使用过程中，分隔符如果是","、":"、"|"、"::"等等，
那么，此时需要引入一个参数 `-F`:
```shell
awk -F  #-F相当于内置变量FS, 指定分割字符
```
在使用`-F`时，如果分隔符是单个的字符，则直接在`-F`后面追加则可，有无空格都可以，如果是字符串时，需要使用单引号进行区别如 `-F '::'`:
```shell
# /etc/passwd 是一个很好的实验对象，它是以':'号做为分隔符
awk -F: '{print $1}' /etc/passwd
```
* 用法三  
当你需要在输出的结果中，显示一些自定义的变量时，通过 `-v` 参数则可以轻松的实现：
```shell
awk -v[变量名]=[变量值]  # 设置变量,-v后面可以不留空格
```
设置的变量可以直接参与运算:
```shell
awk -v num=1 '{print $1+num}' test.log
```
* 用法四  
当我们处理文件内容时，可能需要使用一些条件进行区别与过虑:
```shell
awk '[条件] {处理方式}' {文件名}
```
如，当我们需要查看nginx日志中，所有访问状态为500的访问链接:
```shell
awk '$9=500 {print $7}' test.log
```
当然还是以像其它编程语言一样，使用多个条件,awk支持各自逻辑与或非
```shell
awk '$1="127.0.0.1" && $9=500 {print $7}' test.log
```

#### 使用拓展
* 使用正则表达式
```
awk '/REG/{action}' filename
```
/REG/为正则表达式，可以将$0中，满足条件记录 送入到：action进行处理.

#### 总结
